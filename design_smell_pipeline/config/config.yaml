# Design Smell Detection & Refactoring Pipeline Configuration
# ============================================================

# Detection Settings
detection:
  # Path to the Java source code to analyze
  source_path: "./app/src/main/java"
  
  # Output directory for detection reports
  output_path: "./design_smell_pipeline/output/smells"
  
  # Patterns to exclude from analysis
  excluded_patterns:
    - "**/test/**"
    - "**/generated/**"
    - "**/target/**"
  
  # DesigniteJava settings
  designite:
    jar_path: "./design_smell_pipeline/tools/DesigniteJava.jar"
    # Download URL (for setup)
    download_url: "https://www.designite-tools.com/static/download/DJava/DesigniteJava.jar"

# LLM Settings
llm:
  # Provider: "grok" (FREE!), "openai", or "gemini"
  provider: "grok"
  
  # Grok (xAI) configuration - FREE API!
  # Get your API key from: https://console.x.ai/
  grok:
    model: "grok-beta"
    max_tokens: 8192
    temperature: 0.2
  
  # OpenAI configuration (if using)
  openai:
    model: "gpt-4-turbo"
    max_tokens: 4096
    temperature: 0.2
    
  # Gemini configuration (if using)
  gemini:
    model: "gemini-1.5-pro"
    max_tokens: 8192
    temperature: 0.2

# Refactoring Settings
refactoring:
  # Maximum number of files to refactor per run
  max_files_per_run: 5
  
  # Maximum retries for LLM if validation fails
  max_retries: 3
  
  # Priority order for smell types
  priority_smells:
    - "God Class"
    - "Long Method"
    - "Feature Envy"
    - "Complex Method"
    - "Long Parameter List"
    - "Data Class"
    - "Blob Class"
  
  # Minimum severity to consider for refactoring
  min_severity: "medium"
  
  # Output directory for refactored files
  output_path: "./design_smell_pipeline/output/refactored"

# Large File Handling
chunking:
  # Maximum file size in bytes before chunking
  max_file_size: 50000
  
  # Maximum tokens per chunk for LLM
  max_chunk_tokens: 100000
  
  # Overlap lines between chunks for context
  overlap_lines: 20
  
  # Chunking strategy: "ast_based" or "line_based"
  strategy: "ast_based"

# Git Settings
git:
  # Branch naming pattern
  branch_prefix: "refactoring/design-smells"
  
  # Commit message template
  commit_message_template: "refactor: Automated design smell fixes - {timestamp}"

# PR Settings
pr:
  # Base branch for PRs
  base_branch: "master"
  
  # Labels to add to PRs
  labels:
    - "refactoring"
    - "automated"
    - "design-quality"
  
  # Whether to request reviewers
  assign_reviewers: true
  
  # List of reviewers (GitHub usernames)
  reviewers: []
  
  # PR title template
  title_template: "ðŸ”§ Automated Design Smell Refactoring - {date}"

# Logging
logging:
  level: "INFO"
  file: "./design_smell_pipeline/logs/pipeline.log"

# Validation Settings
validation:
  # Run Maven compile after refactoring
  run_compile: true
  
  # Run tests after refactoring
  run_tests: true
  
  # Maven command for compilation
  compile_command: "mvn compile -q"
  
  # Maven command for testing
  test_command: "mvn test -q"
